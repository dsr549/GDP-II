<!DOCTYPE html>
<html>

<head>
    <title>IHSA @2023</title>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIWbUh6hK1P_ARYXLVwqm2B_IOeACS8is&libraries=geometry"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300&display=swap');

        .nav {
            height: 7vh;
            display: flex;
            justify-content: space-between;
        }

        .nav li {
            list-style-type: none;
            padding: 0px 14px;
        }

        .list-group {
            display: flex;
            align-items: center;
        }

        #map {
          
            width: 60%;
            position: relative;
           
        }

        .sub-form {
            width: 40%;
            background-color: rgb(229, 226, 208);
        }

        .inputs {
            position: absolute;
            top: 7vh;
            left: 45%;

        }
        html,
        body { 
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .parent {
            display: flex;
            position: relative;
            font-size: 10.5px;
            font-family: 'Montserrat', sans-serif;
        }

        .form-container {
            display: flex;
            flex-wrap: wrap;
            column-gap: 38px;
            row-gap: 20px;
            margin-left: 25px;
            justify-content: start;
            padding: 40px 0px;

        }

        .form-item {
            flex: 1 7 calc(50% - 20px);
            display: flex;
        }

        label {
            display: block;

        }

        input[type="text"],
        input[type="number"],
        select,
        input[type="checkbox"] {


            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .first-table {
            border: 1px solid black;
            background-color: rgb(167, 167, 134);
        }


        .first-table td {
            padding: 20px 30px;
            width: 100%;
            border-right: 1px solid black;
        }

        .first-table td:last-child {
            border-right: 1px solid transparent;

        }

        #json-table thead th {
            width: 100%;
            padding: 20px 30px;
            background-color: aliceblue;
        }

        .myresult {
            position: absolute;
            left: 0;
            bottom: 0;
            background-color: gray;
            border-radius: 4px;
        }
        .colors{
            position: absolute;
            background-color: antiquewhite;
            top: 100px;
            padding: 10px;
        }
        .clor{
            width: 30px;
            height: 30px;
        }
        .clor.one{
            background-color: #4CBB17;
           
        }
        .clor.two{
            background-color: yellow;
        }
        .clor.three{
            background-color: orangered;
        }
        .clor.four{
            background-color: lightblue;
        }
        .clor.five{
            background-color: palevioletred;
        }
        .colr-wrap{
            display: flex;
            justify-content: center;
        }
        .colr-wrap p{
            margin-left: 20px;
            font-weight: 800;
        }
      

         /* Custom styling for nav */
    
    </style>
    <script src="https://kit.fontawesome.com/f52c3b31f3.js" crossorigin="anonymous"></script>
</head>

<body>
  
    <div class="nav">


        <div class="list-group">
            <li>Home</li>
            <li>Map</li>
            <li>Announcement</li>
        </div>

        <div class="list-group">
            <li>Menu</li>

        </div>

    </div>
    <div class="parent" style="margin: 50px 0px !important;">
        <div id="map"></div>
        <div class="sub-form">
            <div class="form-container">
                <div class="form-item">
                    <label for="school-name">School Name</label>
                    <input type="text" id="school-name" name="school-name" placeholder="Saint Mary-of-the-Wood">
                </div>

                <div class="form-item">
                    <label for="anchor-school">Is Anchor School</label>
                    <input type="checkbox" id="anchor-school" name="anchor-schooll">
                </div>
                <div class="form-item">
                    <label for="number-input">Number of riders</label>
                    <input type="number" id="number-input" name="number-input">
                </div>
                <div class="form-item">
                    <label for="region">Region</label>
                    <select id="regionone" name="region">
                        <option value="1"> 1</option>
                        <option value="2"> 2</option>
                        <option value="3"> 3</option>
                        <option value="4"> 4</option>
                        <option value="5"> 5</option>
                    </select>
                </div>


            </div>
            <table class="first-table">
                <tr>
                    <td>
                        <div class="form-item">
                            <label for="region">Region</label>
                            <select id="region" name="region">
                                <option value="1" selected>1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </td>
                    <td>oihioh</td>
                    <td>efewfewf</td>
                    <td>efewfwe</td>
                    <td>ewgewgdf</td>
                </tr>
            </table>
            <table id="json-table">
                <thead>
                    <tr>
                        <th>School </th>
                        <th>Riders</th>
                        <th>Anchoor School</th>
                        <th>Average Distance</th>
                        <th>Maxiumum Distance</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="myresult">
            <p id="result"></p>
        </div>
    </div>


    <!--<div class="inputs">

        <input type="text" id="location1" placeholder="loc 1">
        <br>
        <input type="text" id="location2" placeholder="loc 2">
        <br>
        <button onclick="calculateDistanceAndRoute()">Calculate Distance and Route</button>

    </div>-->

<div class="colors">
<div class="colr-wrap">
    <div class="clor one"></div>
    <p>Region 1</p>
</div>
<div class="colr-wrap">
    <div class="clor two"></div>
    <p>Region 2</p>
</div>
<div class="colr-wrap">
    <div class="clor three"></div>
    <p>Region 3</p>
</div>
<div class="colr-wrap">
    <div class="clor four"></div>
    <p>Region 4</p>
</div>
<div class="colr-wrap">
    <div class="clor five"></div>
    <p>Region 5</p>
</div>
</div>

    <script>
        var map;
        var directionsService;
        var directionsRenderer;
        var lexington = { lat: 38.0406, lng: -84.5037 };
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: lexington,
                zoom: 5
            });
            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer();
            directionsRenderer.setMap(map);


            addCustomMarker(40.2022, -85.4089, 'Ball State University', "./images/green.png", 1 , "University of Illinois Urbana-Champaign"); //sub clg 1
            addCustomMarker(39.4801, -88.1759, 'Eastern Illinois University', "./images/green.png", 2 , "University of Illinois Urbana-Champaign"); // sub clg 1 // A2 clg will be ""  and all A clg will be ""
            addCustomMarker(40.4237, -86.9212, 'Purdue University', "./images/green.png", 3 , "University of Illinois Urbana-Champaign");
            addCustomMarker(40.1106, -88.2284, 'University of Illinois Urbana-Champaign', "./images/marina.png", 4 , ""); //
            addCustomMarker(39.1666, -86.5265, 'Indiana University', "./images/green.png", 5 , "University of Illinois Urbana-Champaign"); // sub clg 1 // A2 clg will be ""  and all A clg will be ""
            addCustomMarker(39.7729, -86.1752, 'IUPUI', "./images/green.png", 6 , "University of Illinois Urbana-Champaign");
            addCustomMarker(41.3625, -87.3451, 'Lakeland College', "./images/green.png", 7 , "University of Illinois Urbana-Champaign");
            addCustomMarker(39.5212, -87.4074, 'St. Mary of the Woods College', "./images/green.png", 8 , "University of Illinois Urbana-Champaign");
            addCustomMarker(40.4527, -85.5023, 'Taylor University', "./images/green.png", 9 , "University of Illinois Urbana-Champaign");

        }




        function addCustomMarker(lat, lng, title, iconUrl, myid, baseloation) {
            var customMarkerIcon = iconUrl;
            var marker = new google.maps.Marker({
                position: { lat: lat, lng: lng },
                map: map,
                title: title,
                icon: customMarkerIcon,
                id: myid,
                base: baseloation
            });

            marker.addListener('click', function () {
                handleMarkerClick(marker);
            });





        }

        const jsonData = {
            1: [
            { key: "Ball State University", value: "8", range: "false", type: "156 km", speed: "160 km" },
                 { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false",type: "77.52 km", speed: "77.52 km" },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false", type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false", type: "298.05 km", speed: "310 km" },
        ],
            2: [
            { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
               
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false",type: "269.1 km", speed: "280 km"},
                { key: "IUPUI", value: "6", range:"false", type: "190 km", speed: "200 km" },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            3: [
            { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false",type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
        
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            4: [
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            5: [
            { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km"},
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
           
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            6: [
            { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
        
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false",type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            7: [
            { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false",type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
       
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
                { key: "Taylor University", value: "4", range: "false",  type: "298.05 km", speed: "310 km" },
            ],
            8: [
            { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false",  type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
               
                { key: "Taylor University", value: "4", range: "false", type: "298.05 km", speed: "310 km" },
            ],
            9: [
            { key: "Taylor University", value: "4", range: "false", type: "298.05 km", speed: "310 km" },
            { key: "University of Illinois Urbana-Champaign", value: "7", range: "True", type: "0", speed: "0" },
                { key: "Eastern Illinois University", value: "8", range: "false", type: "77.52 km", speed: "77.52 km" },
                { key: "Ball State University", value: "8", range: "false",  type: "156 km", speed: "160 km"  },
                { key: " Indiana University", value: "4", range:"false", type: "269.1 km", speed: "280 km" },
                { key: "IUPUI", value: "6", range:"false", type: "190 km", speed: "200 km"  },
                { key: "Lakeland College", value: "5", range: "false",  type: "187.33 km", speed: "195 km" },
                { key: "Purdue University", value: "7", range: "false", type: "142.45 km", speed: "145 km" },
                { key: "St. Mary of the Woods College", value: "6", range: "false", type: "144.05 km", speed: "150 km" },
              
            ],


        };


        function handleMarkerClick(marker) {

            var firstLocation = marker.getPosition();
            var firstTitle = marker.getTitle()
            var getid = marker.id
            var basedetail = marker.base
            console.log(getid, "ohoih")
            document.getElementById("school-name").value = firstTitle;


            const regionData = jsonData[getid];

            if (regionData) {
                jsonTable.querySelector("tbody").innerHTML = "";

                regionData.forEach((item) => {
                    const row = document.createElement("tr");
                    row.style.backgroundColor = "gray";
                    const keyCell = document.createElement("td");
                    keyCell.style.padding = "10px 3px"
                    keyCell.textContent = item.key;
                    keyCell.style.textAlign = "center";
                    const valueCell = document.createElement("td");
                    valueCell.textContent = item.value;
                    valueCell.style.textAlign = "center";
                    const valuenew = document.createElement("td");
                    valuenew.style.textAlign = "center";
                    valuenew.textContent = item.range;
                    const valuenew1 = document.createElement("td");
                    valuenew1.textContent = item.type;
                    valuenew1.style.textAlign = "center";
                    valuenew1.style.border = "1px solid gray";

                    const valuenew2 = document.createElement("td");
                    valuenew2.textContent = item.speed;
                    row.appendChild(keyCell);
                    row.appendChild(valueCell);
                    row.appendChild(valuenew);
                    row.appendChild(valuenew1);
                    row.appendChild(valuenew2);
                    jsonTable.querySelector("tbody").appendChild(row);
                });

                jsonTable.style.display = "table";
            } else {
                jsonTable.style.display = "none";
            }

            var AnchorCollegeOneLocation = { lat: 40.1106, lng: -88.2284 };

            var AnchorCollegeOne = "University of Illinois Urbana-Champaign";
      
            var checkbox = document.getElementById("anchor-school");

            // add anchor college here
            if (basedetail === true) {
                checkbox.checked = true;
            }
            else{
                checkbox.checked = false; 
            }

            if (basedetail == AnchorCollegeOne) {  // if getting base clg from addCustomMarker == AnchorCollegeOne this works
                var request = {
                    origin: firstLocation,
                    destination: AnchorCollegeOneLocation,
                    travelMode: 'DRIVING'
                };

                directionsService.route(request, function (response, status) {
                    if (status === 'OK') {
                        directionsRenderer.setDirections(response);

                        var distanceInMeters = response.routes[0].legs[0].distance.value;
                        var distanceInKilometers = (distanceInMeters / 1000).toFixed(2);

                        document.getElementById("result").textContent = "Distance from " + marker.getTitle() + " to University of Illinois Urbana-Champaign: " + distanceInKilometers + " km";
                    } else {
                        alert("Directions request failed: " + status);
                    }
                });


            }

            // copy paste Same logic


        }




        function calculateDistanceAndRoute() {
            const location1 = document.getElementById("location1").value;
            const location2 = document.getElementById("location2").value;

            if (!location1 || !location2) {
                alert("Please enter both locations.");
                return;
            }

            const geocoder = new google.maps.Geocoder();

            geocoder.geocode({ address: location1 }, function (results1, status1) {
                if (status1 === "OK") {
                    const latLng1 = results1[0].geometry.location;

                    geocoder.geocode({ address: location2 }, function (results2, status2) {
                        if (status2 === "OK") {
                            const latLng2 = results2[0].geometry.location;

                            const request = {
                                origin: latLng1,
                                destination: latLng2,
                                travelMode: 'DRIVING'
                            };

                            directionsService.route(request, function (response, status) {
                                if (status === 'OK') {
                                    const distanceInMeters = response.routes[0].legs[0].distance.value;
                                    const distanceInKilometers = (distanceInMeters / 1000).toFixed(2);
                                    document.getElementById("result").textContent = "Distance: " + distanceInKilometers + " km";
                                    directionsRenderer.setDirections(response);
                                } else {
                                    alert("Directions request failed: " + status);
                                }
                            });

                            map.setCenter(latLng1);
                        } else {
                            alert("Location 2 not found: " + status2);
                        }
                    });
                } else {
                    alert("Location 1 not found: " + status1);
                }
            });
        }



        const regionSelect = document.getElementById("region");
        const jsonTable = document.getElementById("json-table");

        function populateJsonTable(selectedRegion) {
            const jsonRegionData = jsonData[selectedRegion];

            if (jsonRegionData) {
                jsonTable.querySelector("tbody").innerHTML = "";

                jsonRegionData.forEach((item) => {
                    const row = document.createElement("tr");
                    row.style.backgroundColor = "gray";
                    const keyCell = document.createElement("td");
                    keyCell.style.padding = "10px 3px"
                    keyCell.textContent = item.key;
                    keyCell.style.textAlign = "center";
                    const valueCell = document.createElement("td");
                    valueCell.textContent = item.value;
                    valueCell.style.textAlign = "center";
                    const valuenew = document.createElement("td");
                    valuenew.style.textAlign = "center";

                    valuenew.textContent = item.range;
                    const valuenew1 = document.createElement("td");
                    valuenew1.textContent = item.type;
                    valuenew1.style.textAlign = "center";
                    valuenew1.style.border = "1px solid gray";

                    const valuenew2 = document.createElement("td");
                    valuenew2.textContent = item.type;
                    valuenew2.textContent = item.speed;
                    row.appendChild(keyCell);
                    row.appendChild(valueCell);
                    row.appendChild(valuenew);
                    row.appendChild(valuenew1);
                    row.appendChild(valuenew2);
                    jsonTable.querySelector("tbody").appendChild(row);
                });

                jsonTable.style.display = "table";
            } else {
                jsonTable.style.display = "none";
            }
        }

        populateJsonTable("1");

        regionSelect.addEventListener("change", () => {
            const selectedRegion = regionSelect.value;
            populateJsonTable(selectedRegion);
        });

    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIWbUh6hK1P_ARYXLVwqm2B_IOeACS8is&libraries=geometry&callback=initMap">
        </script>
</body>

</html>