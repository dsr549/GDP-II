<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="ISHA.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="TemplateMo">
  <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

  <title>Horse and Riders Page</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-edu-meeting.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/lightbox.css">
  <style>
    /* Custom section for announcements */
    .announcements {
      margin-top: 40px;
    }

    .announcement-item {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e9ecef;
    }

    .announcement-content h3 {
      margin-bottom: 10px;
      font-size: 20px;
    }

    .announcement-content p {
      margin-bottom: 0;
    }

    .announcement-date {
      text-align: right;
      margin-top: 10px;
      font-size: 14px;
      color: #888;
    }

    /* Custom buttons */
    .announcement-buttons {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .announcement-buttons button {
      margin-left: 10px;
    }

    /* Custom styling for nav */
    .main-nav {
      background-color: rgba(7, 7, 7, 0.15);
    }
    
    .announcement-header-area {
      background-color: rgba(7, 7, 7, 0.15);
      position: relative;
      left: 0;
      right: 0;
      z-index: 100;
      -webkit-transition: all .5s ease 0s;
      -moz-transition: all .5s ease 0s;
      -o-transition: all .5s ease 0s;
      transition: all .5s ease 0s;
    }

    /* Custom styling for table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th,
    td {
      padding: 8px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }
    .class-table{
      box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
      border: 1px solid rgba(125, 125, 125, 0.614);
      margin: 50px 0px;
    }
     /* footer */
     .footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        height: 150px;
        margin-top: 250px;
        position: relative;
        bottom: 0;
        width: 100%;
    }

    .footer .social a{

        margin-right: 20px;
        color: #4CBB17;
    }

    .footer .social a:hover{
        color: #fff;
        background-image: linear-gradient(45deg, #32be8f 0%, #38d39f 510%, #32be8f 100%);
    }
    .select-dropdown {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  
  background: url('your-arrow-image.png') no-repeat right center;
  background-size: 20px 20px; 
  padding: 3px; 
  border: 1px solid #ccc; 
  border-radius: 4px;
  width: 400px; 
  cursor: pointer; 
}


.select-dropdown option {
  background: #fff; 
  color: #333; 
  padding: 10px;
  border: none; 

}
.select-dropdown:hover {
  background: #f0f0f0; 
}
.edit-button {
  background-color: #0074E4; 
  color: #ffffff; 
  padding: 4px 16px; 
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.edit-button:hover {
  background-color: #0057a8; 
}
  </style>

<script src="https://kit.fontawesome.com/f52c3b31f3.js" crossorigin="anonymous"></script>
</head>

<body>

  <!-- Sub Header -->


 <!-- ***** Header Area Start ***** -->
 <header class="announcement-header-area" style="background-color: #444; height: 150px;">
  <!--<div class="sub-header">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-sm-8">
          <div class="left-content">
          </div>
        </div>
        <div class="col-lg-4 col-sm-4">
          <div class="right-icons">
            <ul>
              <li><a href="#"><i class="fa fa-facebook"></i></a></li>
              <li><a href="#"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#"><i class="fa fa-instagram"></i></a></li>
              <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
            </ul>
            
          </div>
          
        </div>
      </div>
    </div>
  </div>-->
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <a href="index.html" class="logo">
              InterCollegiate Horse Shows Association
            </a>
            <!-- ***** Menu Start ***** -->
            <ul class="nav">
              <li class="scroll-to-section"><a href="index.html">Home</a></li>
              <li><a href="announcements.html" >Announcements</a></li>
              <li class="scroll-to-section"><a href="details.html" class="active">Horse/Rider Info</a></li>
              <li class="scroll-to-section"><a  href="map.html">Maps</a></li>
              <!--<li class="has-sub">
                <a href="javascript:void(0)">Menu</a>
                <ul class="sub-menu">
                  <li><a href="login.html">Login</a></li>
                  <li><a href="Signup.html">Sign up</a></li>
                </ul>
              </li>-->
              <li class="scroll-to-section"><a href="contact.html">Contact Us</a></li>
              <li class="scroll-to-section"><a href="gallery.html">Gallery</a></li>
            </ul>
            <a class='menu-trigger'>
              <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="section-heading"style="margin-top: 30px;">
          <h2>Horse and Riders - Randomized Data</h2>
          <label for="class">Select Class:</label>
          <select id="class" class="select-dropdown" >
              <option hidden>Select a Class</option>
          </select>
          <button class="edit-button" id="show-all" style="display: none;">Show All Classes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="table-responsive">
            <!-- Container to hold the tables for each class -->
            <div id="table"></div>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer bg-dark" id="footer" style="bottom: 0 !important; background:#444;">
    <div class="social">
      <a href="https://www.facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-2x"></i></a>
          <a href="https://www.twitter.com" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
          <a href="https://www.youtube.com" target="_blank"><i class="fab fa-youtube fa-2x"></i></a>
          <a href="https://www.linkedin.com" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a>
    </div>
    <p>copyright &copy 2023 - IHSA</p>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", async function () {
    const randomizer = await fetch('/api/getRandomizedData', {
        method: 'GET',
        headers: {
            'Accept': 'application/json'
        }
    })
    .then((res) => res.json());
    console.log(randomizer)
    if(randomizer.list){
      randomizer.list.sort((a, b) => a.class_name.localeCompare(b.class_name));
      const classSelect = document.getElementById("class");
      const uniqueClasses = [...new Set(randomizer.list.map(item => item.class_name))];
      uniqueClasses.forEach(className => {
          const option = document.createElement("option");
          option.value = className;
          option.text = className;
          classSelect.appendChild(option);
          populateTable(className);
      });
       /* randomizer.list.forEach((data,index) => {
            var temp =`<tr>
            <td>${data.class_name}</td>
            <td>${data.rider_id}</td>
            <td>${data.rider_name}</td>
            <td>${data.rider_school}</td>
            <td>${data.horse_name}</td>
            <td>${data.horse_provider}</td>
          </tr>`;
          document.getElementById('table').innerHTML += temp;
        }); */ 

        function populateTable(selectedClass) {
          const tableContainer = document.getElementById("table");
          const filteredData = randomizer.list.filter((item) => item.class_name === selectedClass);
          const table = document.createElement("table");
          table.className = `class-table ${selectedClass}-table active-table`;
          let order = 1;
          table.innerHTML = `
          <thead>
            <tr>
              <th colspan="6">${selectedClass}</th>
            </tr>
            <tr>
              <th>Order</th>
              <th>Rider ID</th>
              <th>Rider Name</th>
              <th>Rider School</th>
              <th>Horse Name</th>
              <th>Provider</th>
            </tr>
          </thead>
          <tbody>
            ${filteredData.map((data, index) => {
              return `
            <tr>
              <td>${order++}</td>
              <td>${data.rider_id}</td>
              <td>${data.rider_name}</td>
              <td>${data.rider_school}</td>
              <td>${data.horse_name}</td>
              <td>${data.horse_provider}</td>
          </tr>
          `;
            }).join('')}
          </tbody>`;

          tableContainer.appendChild(table);
          function clearAllTables() {
              const tableContainer = document.getElementById("table");
              tableContainer.innerHTML = ""; 
          }
          classSelect.addEventListener("change", () => {
              const selectedClass = classSelect.value;
              clearAllTables();
              if (selectedClass !== "Select a Class") {
                  populateTable(selectedClass);
                 // document.getElementById("randomize").style.display = "inline-block";
                  document.getElementById("show-all").style.display = "inline-block";
              } else {
                  document.getElementById("show-all").style.display = "none";
              }
          });
          document.getElementById("show-all").addEventListener("click", () => {
              clearAllTables(); 
              uniqueClasses.forEach(className => {
                  populateTable(className); 
              });
              document.getElementById("show-all").style.display = "none";
              classSelect.value = "Select a Class";
          });
        }
    } else {
      console.log("Error")
    }
});
</script>
</body>

</html>
