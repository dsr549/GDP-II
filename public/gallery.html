<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="ISHA.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="gallery.css">
  <meta name="author" content="TemplateMo">
  <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

  <title>Horse and Riders Page</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-edu-meeting.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/lightbox.css">
  <style>
    .announcements {
      margin-top: 40px;
    }

    .announcement-item {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e9ecef;
    }

    .announcement-content h3 {
      margin-bottom: 10px;
      font-size: 20px;
    }

    .announcement-content p {
      margin-bottom: 0;
    }

    .announcement-date {
      text-align: right;
      margin-top: 10px;
      font-size: 14px;
      color: #888;
    }

    /* Custom buttons */
    .announcement-buttons {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .announcement-buttons button {
      margin-left: 10px;
    }

    /* Custom styling for nav */
    .main-nav {
      background-color: rgba(7, 7, 7, 0.15);
    }

    .announcement-header-area {
      background-color: rgba(7, 7, 7, 0.15);
      position: relative;
      left: 0;
      right: 0;
      z-index: 100;
      -webkit-transition: all .5s ease 0s;
      -moz-transition: all .5s ease 0s;
      -o-transition: all .5s ease 0s;
      transition: all .5s ease 0s;
    }

    /* Custom styling for table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th,
    td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }
 
 /* footer */
 .footer {
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 text-align: center;
 height: 150px;
 position: relative;
 bottom: 0;
 width: 100%;
}

.footer .social a{

 margin-right: 20px;
 color: #4CBB17;
}

.footer .social a:hover{
 color: #fff;
 background-image: linear-gradient(45deg, #32be8f 0%, #38d39f 510%, #32be8f 100%);
}
.thumbnails{
			width: 20%;
    	float: left;
		}
		.thumbnail{
			height: 100px;
      width: 150px;
      object-fit: contain;
			border: 4px solid #555;
			padding: 1px;
			margin: 0 10px 10px 0;
		}
		.thumbnail:hover{
			border: 4px solid #00ccff;
			cursor: pointer;
		}
    .preview{
      width: 100%;
      height: 950px;
      margin-left: 50px;
    }
		.preview img{
			width: 80%;
      height: 100%;
      object-fit: contain;
		}

    
    sidebar {
    background-color: #333;
    color: #fff;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

        .folder-button-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .folder {
            cursor: pointer;
            padding: 10px 20px;
            border: none;
            background-color: #444;
            color: #fff;
            text-align: center;
            transition: background-color 0.3s ease, transform 0.3s ease;
            margin-top: 50px;
        }

        .folder:hover {
            background-color: #32be8f;
            transform: scale(1.05); 
        }
        .content {
            display: none;
        }

        .content.active {
            display: block;
        }
        /* Style for the empty folder message */
      #empty-folder-message {
          display: none; /* Initially hide the message */
          text-align: center;
          font-size: 24px;
          color: #555;
          margin-top: 20px;
      }

      /* Style for showing the empty folder message */
      .active #empty-folder-message {
          display: block;
      }

</style>
<script src="https://kit.fontawesome.com/f52c3b31f3.js" crossorigin="anonymous"></script>
</head>

<body>
 <header class="announcement-header-area" style="background-color: #444; height: 150px;">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <a href="index.html" class="logo">
              InterCollegiate Horse Shows Association
            </a>
            <ul class="nav">
              <li class="scroll-to-section"><a href="index.html">Home</a></li>
              <li><a href="announcements.html" >Announcements</a></li>
              <li class="scroll-to-section"><a href="details.html">Horse/Rider Info</a></li>
              <li class="scroll-to-section"><a href="map.html">Maps</a></li>
              <li class="scroll-to-section"><a href="contact.html">Contact Us</a></li>
              <li class="scroll-to-section"><a href="gallery.html" class="active">Gallery</a></li>
            </ul>
            <a class='menu-trigger'>
              <span>Menu</span>
            </a>
          </nav>
        </div>
      </div>
    </div>
  </header>

  <div class="container" style="min-height: calc(100vh - 250px); margin-bottom: 20px;">
    <div class="row">
        <div class="col-lg-10">
            <div class="sidebar">
                <div class="folder-button-container" id="folders">
                </div>
            </div>
        </div>
            <div class="col-lg-12" id="imagesGallery">
                
      </div>
    </div>
  </div>

  
  <footer class="footer bg-dark" id="footer" style="bottom: 0 !important; background:#444;">
    <div class="social">
      <a href="https://www.facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-2x"></i></a>
          <a href="https://www.twitter.com" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
          <a href="https://www.youtube.com" target="_blank"><i class="fab fa-youtube fa-2x"></i></a>
          <a href="https://www.linkedin.com" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a>
    </div>
    <p>copyright &copy 2023 - IHSA</p>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", async function () {
   
  
    async function loadFolders() {
      try {
          const response = await fetch('/api/getFolders', {
              method: 'GET',
              headers: {
                  'Accept': 'application/json'
              }
          });
          const data = await response.json();
          console.log(data)
          if (data.folders) {
              displayFolders(data);
          }
      } catch (error) {
          console.error("Error fetching folders:", error);
      }
  }
  
  function displayFolders(data) {
      const foldersDiv = document.getElementById('folders');
      const imagesGallery = document.getElementById('imagesGallery');
      let foldersHTML = '';
      data.folders.forEach((folder) => {
          foldersHTML += `<div class="folder" data-event="${folder.folder_id}">${folder.folder_name}</div>`;
          let galleryHTML = `<div id="content-${folder.folder_id}" class="content">
              <div class="section-heading">
                  <h2>Images </h2>
              </div>
              <div class="gallery">
                  <br />
                  <div id="thumbnails-${folder.folder_id}" class="thumbnails">`;
          data.images.forEach((image) => {
              if (image.folder_id === folder.folder_id) {
                  galleryHTML += `<img src="${image.image_url}" class="thumbnail">`;
              }
          });
          galleryHTML += `</div>
              <div id="preview-${folder.folder_id}" class="preview">
                  <img name="preview" src="#">
              </div>
          </div>
      </div>`;
          imagesGallery.innerHTML += galleryHTML;
      });
      foldersDiv.innerHTML = foldersHTML;
      setupGalleryEventListeners();
      attachEventListeners();
  }
   
  function attachEventListeners() {
      const folders = document.querySelectorAll(".folder");
      const contents = document.querySelectorAll(".content");
  
      folders.forEach((folder) => {
          folder.addEventListener("click", () => {
              const eventId = folder.getAttribute("data-event");
              toggleGalleryDisplay(eventId, contents);
          });
      });
  }
  
  function toggleGalleryDisplay(eventId, contents) {
      contents.forEach((content) => {
          const contentFolderId = content.id.split('-')[1];
          if (contentFolderId === eventId) {
              content.classList.toggle("active");
              const gallery = content.querySelector(".gallery");
              gallery.style.display = content.classList.contains("active") ? "block" : "none";
              if(content.classList.contains("active")){
                sessionStorage.setItem('folder_id',eventId);
                console.log(eventId);
              } else {
                sessionStorage.removeItem('folder_id');
              }
          } else {
              content.classList.remove("active");
              const gallery = content.querySelector(".gallery");
              gallery.style.display = "none";
          }
      });
  }
  
  
  loadFolders();
  
  function setImagePreview(imageUrl) {
    const previewImage = document.querySelector('#preview img');
    previewImage.src = imageUrl;
  }
  function setupGalleryEventListeners() {
    const thumbnails = document.querySelectorAll('.thumbnail');
    thumbnails.forEach(thumbnail => {
        thumbnail.addEventListener('click', () => {
            const folderId = thumbnail.closest('.content').id.split('-')[1];
            const previewImage = document.querySelector(`#preview-${folderId} img`);
            if (previewImage) {
                previewImage.src = thumbnail.src;
            }
        });
    });
  }
  });
  
  </script>
</body>

</html>
